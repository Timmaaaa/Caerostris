@namespace Caerostris.Shared.Cards


@inject SpotifyService Spotify


    <div class="card navigation-thumbnail-card" style="width: @CssWidth">
    
        <img src=@Thumbnail.AtLeastOfHeight(WidthPx) class="card-img-top" style="width: @CssWidth; height: @CssWidth;">

        @if (!(ContextUri is null) || !(TrackUri is null))
        {
            <div class="d-flex align-items-center justify-content-center centered-button-container" 
                 style="width: @CssWidth; height: @CssWidth;">

                @if(!(ContextUri is null))
                {
                    <PrimaryPlayPauseButton ContextUri=@ContextUri />  
                }
                else if (!(TrackUri is null))
                { 
                    <PrimaryPlayPauseButton TrackUri=@TrackUri StartPlaybackAtTrack=@(t => Spotify.PlayTrack(contextUri: null, trackUri: t)) />  
                }

            </div>
        }

        <div class="card-body pt-3">

            <a href=@Url>
                <h5 class="card-title">@Title</h5>
            </a>

            @if (!(Details is null))
            {
                <p class="card-text">@Details</p>
            }

        </div>

    </div>


@code
{
    [Parameter]
    public int WidthPx { get; set; } = 150;

    [Parameter]
    public string Url { get; set; } = default!;

    [Parameter]
    public string? ContextUri { get; set; }

    [Parameter]
    public string? TrackUri { get; set; }

    [Parameter]
    public List<Image> Thumbnail { get; set; } = default!;

    [Parameter]
    public string Title { get; set; } = default!;

    [Parameter]
    public string Details { get; set; } = default!;

    private string CssWidth => $"{WidthPx}px";
}
