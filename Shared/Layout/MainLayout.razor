@using Caerostris.Shared.Providers
@using Caerostris.Pages.Auth
@using Caerostris.Pages.Playback
@using Blazored.Modal 


@inherits LayoutComponentBase


<CascadingValue Value=@menu>

    <div class="d-flex flex-column sidebar">
        <NavMenu />
        <UserPlaylistsList />
    </div>

    <div class="main">
        <div class="d-flex flex-column content h-100">

            <PlaybackContextProvider>

                <div class="p-1" style="height: calc(100vh - 70px); max-width:calc(100vw - 500px)">
                    @Body
                </div>

                <PlaybackBar />

            </PlaybackContextProvider>

        </div>
    </div>

    <div class="sidebar">
        <ContextMenu @ref=@menu />
    </div>

    <AuthDaemon />

    <BlazoredModal />

</CascadingValue>

@code
{
    private ContextMenu? menu;
}